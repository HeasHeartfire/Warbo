<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Warbo</title>
	<!-- <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"> -->
	<link rel="stylesheet" href="/static/css/bootstrap.min.css">
	<link rel="stylesheet" href="/static/css/style.css">
	<link rel="stylesheet" href="/static/css/waves.min.css">
	<link rel="stylesheet" href="/static/css/font-awesome.min.css">
	<!-- <link rel="stylesheet" href="/static/css/chat.css"> -->
	<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
	<!-- <script src="/static/js/jquery.js"></script> -->
	<script src="/static/js/bootstrap.min.js"></script>
	<script src="/static/js/waves.min.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	{% block head %}{% endblock %}
</head>

<body>
	<nav class="navbar navbar-toggleable-md navbar-light bg-faded">
		<button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<a class="navbar-brand" href="/">WARBO</a>
		<div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="navbar-nav mr-auto">
				<li class="nav-item {{ 'active' if url=='/'}}">
					<a class="nav-link" href="/">Inicio</a>
				</li>
				{% if sess.user %}
				<li class="nav-item {{ 'active' if url=='/game'}}">
					<a class="nav-link" href="/game">Juego</a>
				</li>
				{% endif %}
			</ul>
			<ul class="navbar-nav navbar-right">
				{% if sess.user %}
					<li class="dropdown" id="menuLogout">
						<a class="dropdown-toggle nav-link" href="#" data-toggle="dropdown" id="navLogout">{{sess.user}}</a>
						<div class="dropdown-menu">
							{% if sess.characters %}
									{% for char in sess.characters %}
									<form action="/character" method="post">
										<input type="hidden" name='charname' value="{{char.name}}">
								        <button type="submit">{{char.name}}</button>
							        </form>
								    {% endfor %}
						    {% endif %}
						    {% if sess.characters_max < 3 %}
						    	<a href="/newchar">Crear un PJ nuevo</a>
						    {% endif %}
							<form action="/logout" method="post" class="form" id="formLogout">
								<input type="hidden" name="url" value="{{url}}">
								<button type="submit" id="btnLogout" class="btn btn-danger">Logout</button>
							</form>
						</div>
					</li>
				{% else %}
					<li class="dropdown" id="menuLogin">
						<a class="dropdown-toggle nav-link" href="#" data-toggle="dropdown" id="navLogin">Login</a>
						<div class="dropdown-menu">
							<form action="/login" method="post" class="form" id="formLogin">
								<input name="username" placeholder="Usuario" type="text">
								<input name="password" placeholder="Contraseña" type="password">
								<input type="hidden" name="url" value="{{url}}">
								<br>
								<button type="submit" id="btnLogin" class="btn btn-success">Login</button>
							</form>
						</div>
					</li>
					<li class="dropdown" id="menuSignup">
						<a class="dropdown-toggle nav-link" href="#" data-toggle="dropdown" id="navSignup">Signup</a>
						<div class="dropdown-menu">
							<form action="/signup" method="post" class="form" id="formSignup">
								<input name="username" placeholder="Usuario" type="text">
								<input name="password" placeholder="Contraseña" type="password">
								<input type="hidden" name="url" value="{{url}}">
								<br>
								<button type="submit" id="btnSignup" class="btn btn-warning">Signup</button>
							</form>
						</div>
					</li>
				{% endif %}
			</ul>
		</div>
	</nav>
	<div id="wrap" class="container-fluid">
		{% if sess.signup %}
		<div class="card">
		  <div class="card-block">
		    <h4 style="color:black;" class="card-title">Información</h4>
		    <p style="color:black;" class="card-text">{{sess.signup}}</p>
		  </div>
		</div>
		{% endif %}

		{% block content %}{% endblock %}
	</div>
	<script>
		$(document).ready(function() {
			Waves.attach('.nav-item');
			Waves.init();

			$('#menuLogin').on('show.bs.dropdown', function(){
				$(this).toggleClass('nav-item active');
			});
			$('#menuLogout').on('show.bs.dropdown', function(){
				$(this).toggleClass('nav-item active');
			});
			$('#menuSignup').on('show.bs.dropdown', function(){
				$(this).toggleClass('nav-item active');
			});
			$('#menuLogin').on('hide.bs.dropdown', function(){
				$(this).toggleClass('nav-item active');
			});
			$('#menuLogout').on('hide.bs.dropdown', function(){
				$(this).toggleClass('nav-item active');
			});
			$('#menuSignup').on('hide.bs.dropdown', function(){
				$(this).toggleClass('nav-item active');
			});
		});
	</script>
</body>

</html>
